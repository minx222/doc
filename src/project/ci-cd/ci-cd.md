---
outline: deep
---

# 基于Nodejs实现CI/CD

## 需求分析
公司需要实现：1. commit -> 2. 发送消息给主管 -> 3. 合并 -> 4. 构建 -> 5. [发送消息给对应的人员](#n1)

## 原因
> 公司中项目较多，需要对大量的项目实现CI/CD，手动配置每个项目的流水线显然效率低下，容易出错，不好修正。经过调研有两种解决方案

+ 1. Shared Library + Gitlab自带的一些功能
    + 优点：jenkins原生自带的功能，不需要额外的服务器，功能完善，可靠性良好
    + 缺点：需要学习新语言groovy（尝试下来发现比较难以处理），拓展性不好（公司需要实现模版消息推送）

+ 2. Nodejs + gitlab web hooks
    + 优点：拓展性好，不需要学习新语言，能快速开发
    + 缺点：需要额外的服务器，可靠性不行（因为重启会丢失消息）


###### n1: 
需求来源（公司规定分支要和需求来源有关系，这里直接提取就可以了）、[代码提交信息和版本发布](#n2)

###### n2: 
这里面有个恶心的需求，是版本信息，默认累加是0.0.1, 然后具体的版本信息可以在信息里面指定，提mr的时候没有写信息的，取最近一次提交的信息