---
outline: deep
---

# Dom diff
Vue 的 DOM Diff 算法是其高效渲染机制的核心，通过对比新旧虚拟 DOM（Virtual DOM）树的差异，最小化实际 DOM 操作，从而提升性能。

## 1. 什么是虚拟 DOM
> 虚拟 DOM（Virtual DOM）是使用 JavaScript 对象来描述 DOM 的结构，它与 DOM 的区别在于：虚拟 DOM 不是真实的 DOM，而是一个轻量级的 JavaScript 对象，它与 DOM 的结构相同，但并不是真实的 DOM 节点，因此它的大小要远远小于真实的 DOM 节点。

## 2. 为什么需要虚拟dom
1. 为了实现跨平台，虚拟 DOM 可以渲染到不同的平台，比如浏览器、小程序、原生应用等。

2. 为了提升dom更新性能。Vue采用订阅发布的模式，当数据改变时，需要全量更新，如果使用真是dom，那么性能会很低，所以使用虚拟dom，通过diff算法，只更新需要更新的dom，从而提升性能。（`ps：这是设计缺陷`）

3. 更好的测试。虚拟dom可以方便的进行单元测试，因为虚拟dom是纯js对象，所以可以方便的进行测试。


## 3. Diff 算法的具体流程
1. 根节点比较
- 相同节点（相同标签名、相同 key、相同类型）：复用旧节点，更新属性，递归比较子节点。
- 不同节点：销毁旧节点及其子树，创建新节点并插入

## diff算法
### 最长递增子序列
```js
function LIS(arr) {

}
```